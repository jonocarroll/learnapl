
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>The dfns workspace &#8212; Learning APL</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing" href="testing.html" />
    <link rel="prev" title="HttpCommand" href="http.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo2.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Learning APL</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="array.html">
   It’s arrays all the way down
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="indexing.html">
   Indexing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="manip.html">
   Glyphiary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="functions.html">
   Direct functions and operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iteration.html">
   Iteration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="key.html">
   The Key operator:
   <code class="docutils literal notranslate">
    <span class="pre">
     ⌸
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="at.html">
   The At operator:
   <code class="docutils literal notranslate">
    <span class="pre">
     @
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="rank.html">
   The Rank/Atop operator:
   <code class="docutils literal notranslate">
    <span class="pre">
     ⍤
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stencil.html">
   The Stencil operator:
   <code class="docutils literal notranslate">
    <span class="pre">
     ⌺
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="over.html">
   The Över operator:
   <code class="docutils literal notranslate">
    <span class="pre">
     ⍥
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dyadictrn.html">
   Dyadic transpose:
   <code class="docutils literal notranslate">
    <span class="pre">
     A⍉B
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="decode.html">
   Encode decode:
   <code class="docutils literal notranslate">
    <span class="pre">
     ⊤⊥
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="products.html">
   Products
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tacit.html">
   Trainspotting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="find.html">
   Finding things
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cookbook1.html">
   Partitions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="errors.html">
   Error handling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="aplway.html">
   The APL Way
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="namespaces.html">
   Namespaces
   <code class="docutils literal notranslate">
    <span class="pre">
     ⎕NS
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="io.html">
   Dealing with real data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="http.html">
   HttpCommand
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   The dfns workspace
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="testing.html">
   Testing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="workflow.html">
   A Dyalog workflow. Or two.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="next.html">
   What now?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tldr.html">
   Too long; didn’t read
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/xpqz/learnapl"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/xpqz/learnapl/issues/new?title=Issue%20on%20page%20%2Fdfnsws.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/dfnsws.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#iotag">
   iotag
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#segs">
   segs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cmat-and-pmat">
   cmat and pmat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-stpath-and-scc">
   span, stpath and scc
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#strongly-connected-components">
     Strongly Connected Components
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>The dfns workspace</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#iotag">
   iotag
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#segs">
   segs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cmat-and-pmat">
   cmat and pmat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-stpath-and-scc">
   span, stpath and scc
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#strongly-connected-components">
     Strongly Connected Components
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="the-dfns-workspace">
<h1>The dfns workspace<a class="headerlink" href="#the-dfns-workspace" title="Permalink to this headline">#</a></h1>
<blockquote>
<div><p>Computers are like Old Testament gods; lots of rules and no mercy.  –<em>Joseph Campbell</em></p>
</div></blockquote>
<p>Dyalog ships with a workspace called <a class="reference external" href="http://dfns.dyalog.com/sindx.htm">dfns</a>. It’s perhaps best viewed as a set of diverse examples of … stuff. Hard to explain – maybe think of it as <a class="reference external" href="https://en.wikipedia.org/wiki/John_M._Scholes">John Scholes’</a> scrap book, interesting snippets of APL code that may (or may not) be useful to other APLers. No other language I’m aware of has something like this – a folklore snapshot. The oral tradition of the language, written down.</p>
<p>As a “standard library” it’s hopelessly badly organized - so let’s not call it that, and it’s not the intention anyway. Yet it contains some real gems, and it’s outstandingly well documented, most entries accompanied by substantial essays. It contains interpreters for several languages, including <a class="reference external" href="http://dfns.dyalog.com/n_lisp.htm">Lisp</a>, tons of utility routines, a pretty comprehensive set of functions for manipulating graphs, various non-trivial data structures (<a class="reference external" href="http://dfns.dyalog.com/n_avl.htm">avl</a>, <a class="reference external" href="http://dfns.dyalog.com/n_splay.htm">splay</a>, <a class="reference external" href="http://dfns.dyalog.com/n_redblack.htm">redblack</a>) etc etc.</p>
<p>For the learner, perhaps the most productive use of the dfns ws is as inspiration: browsing through it, learning from its examples and well-documented implementations. I thought I’d highlight some of the things I’ve discovered in there and found useful.</p>
<section id="iotag">
<h2>iotag<a class="headerlink" href="#iotag" title="Permalink to this headline">#</a></h2>
<p>A very useful little function is <a class="reference external" href="http://dfns.dyalog.com/n_iotag.htm">iotag</a>, for <code class="docutils literal notranslate"><span class="pre">iota-generalized</span></code>, although I can’t help but read it <code class="docutils literal notranslate"><span class="pre">io-tag</span></code>. It fleshes out the built-in <code class="docutils literal notranslate"><span class="pre">iota</span></code>, <code class="docutils literal notranslate"><span class="pre">⍳</span></code>, both in its monadic and dyadic forms. Let’s look at a few examples:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;iotag&#39;</span><span class="w"> </span><span class="nf">⎕CY</span><span class="w"> </span><span class="s1">&#39;dfns&#39;</span><span class="w"> </span><span class="c1">⍝ Load the iotag function</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Inclusive range <code class="docutils literal notranslate"><span class="pre">start</span></code> to <code class="docutils literal notranslate"><span class="pre">end</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">10</span><span class="w"> </span><span class="nv">iotag</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="c1">⍝ ⍺ to ⍵ inclusive range</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">10 11 12 13 14 15 16 17 18 19 20
</span></div></div>
</div>
<p>…and which can also count down:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">20</span><span class="w"> </span><span class="nv">iotag</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">20 19 18 17 16 15 14 13 12 11 10
</span></div></div>
</div>
<p>and is fine with negative numbers, too:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">¯10</span><span class="w"> </span><span class="nv">iotag</span><span class="w"> </span><span class="m">¯20</span><span class="w"></span>
<span class="m">¯20</span><span class="w"> </span><span class="nv">iotag</span><span class="w"> </span><span class="m">¯10</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">¯10 ¯11 ¯12 ¯13 ¯14 ¯15 ¯16 ¯17 ¯18 ¯19 ¯20
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">¯20 ¯19 ¯18 ¯17 ¯16 ¯15 ¯14 ¯13 ¯12 ¯11 ¯10
</span></div></div>
</div>
<p>We can also specify a step-size:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">10</span><span class="w"> </span><span class="nv">iotag</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">10 12 14 16 18 20
</span></div></div>
</div>
<p>which doesn’t even have to be integer</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">10</span><span class="w"> </span><span class="nv">iotag</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">0.53</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">10 10.53 11.06 11.59 12.12 12.65 13.18 13.71 14.24 14.77 15.3 15.83 16.36 16.89 17.42 17.95 18.48 19.01 19.54 20.07 20.6
</span></div></div>
</div>
<p>It also understands letters:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Q&#39;</span><span class="w"> </span><span class="nv">iotag</span><span class="w"> </span><span class="s1">&#39;H&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">QPONMLKJIH
</span></div></div>
</div>
<p>It can do many, many more things, also generalizing the <code class="docutils literal notranslate"><span class="pre">index-of</span></code> aspect of <em>iota</em>.</p>
</section>
<section id="segs">
<h2>segs<a class="headerlink" href="#segs" title="Permalink to this headline">#</a></h2>
<p>The <a class="reference external" href="http://dfns.dyalog.com/n_segs.htm">segs</a> function splits a character vector on a set of separator chars. Whilst the implementation is simple enough to memorize – and easy enough to derive – it’s a handy tool to have access to.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;segs&#39;</span><span class="w"> </span><span class="nf">⎕CY</span><span class="w"> </span><span class="s1">&#39;dfns&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;,;: &#39;</span><span class="w"> </span><span class="nv">segs</span><span class="w"> </span><span class="s1">&#39;one,two;three four,;:five,six,&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┬─────┬────┬────┬───┐
│one│two│three│four│five│six│
└───┴───┴─────┴────┴────┴───┘
</span></div></div>
</div>
<p>There isn’t much to this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;,;: &#39;</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="o">~</span><span class="bp">⍵</span><span class="o">∊</span><span class="bp">⍺</span><span class="p">)</span><span class="o">⊆</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="s1">&#39;one,two;three four,;:five,six,&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┬─────┬────┬────┬───┐
│one│two│three│four│five│six│
└───┴───┴─────┴────┴────┴───┘
</span></div></div>
</div>
</section>
<section id="cmat-and-pmat">
<h2>cmat and pmat<a class="headerlink" href="#cmat-and-pmat" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="http://dfns.dyalog.com/n_cmat.htm">cmat</a> and <a class="reference external" href="http://dfns.dyalog.com/n_pmat.htm">pmat</a> generates combinations and permutations respectively.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;cmat&#39;</span><span class="w"> </span><span class="s1">&#39;pmat&#39;</span><span class="w"> </span><span class="nf">⎕CY</span><span class="w"> </span><span class="s1">&#39;dfns&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Starting with <code class="docutils literal notranslate"><span class="pre">cmat</span></code>, what unique ways can we combine three numbers out of 1, 2, 3, 4 and 5?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">3</span><span class="w"> </span><span class="nv">cmat</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3
1 2 4
1 2 5
1 3 4
1 3 5
1 4 5
2 3 4
2 3 5
2 4 5
3 4 5
</span></div></div>
</div>
<p>Or 3 out of 5 letters?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">↓</span><span class="m">3</span><span class="kt">{</span><span class="bp">⍵</span><span class="sr">[</span><span class="bp">⍺</span><span class="w"> </span><span class="nv">cmat</span><span class="o">⍴</span><span class="bp">⍵</span><span class="sr">]</span><span class="kt">}</span><span class="s1">&#39;abcde&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐
│abc│abd│abe│acd│ace│ade│bcd│bce│bde│cde│
└───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘
</span></div></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">cmat</span></code> produces results that are lexicographically ordered.</p>
<p>Moving on to <code class="docutils literal notranslate"><span class="pre">pmat</span></code> we generate <em>permutations</em> instead – given an integer right argument, produce all the different ways that many items can be ordered.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">pmat</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">1 2 3 4
1 2 4 3
1 3 2 4
1 3 4 2
1 4 2 3
1 4 3 2
2 1 3 4
2 1 4 3
2 3 1 4
2 3 4 1
2 4 1 3
2 4 3 1
3 1 2 4
3 1 4 2
3 2 1 4
3 2 4 1
3 4 1 2
3 4 2 1
4 1 2 3
4 1 3 2
4 2 1 3
4 2 3 1
4 3 1 2
4 3 2 1
</span></div></div>
</div>
</section>
<section id="span-stpath-and-scc">
<h2>span, stpath and scc<a class="headerlink" href="#span-stpath-and-scc" title="Permalink to this headline">#</a></h2>
<p>There is also an excellent set of routines for graph manipulation, path finding and searching. Whilst a full intro to those is beyond the scope I had in mind for this, we can show some simple examples that perhaps can serve as a jump-off point. The documentation is comprehensive and excellent.</p>
<p>When we deal with graphs, we want to separate the graph <em>structure</em> from the content. The graph routines in the dfns ws only deal with graph structure, so it’s up to you to relate that back to content. We’ll look at how this is done.</p>
<p>So a graph consists of a set of vertices, connected by edges that have a direction. We represent the connectivity as a vector of vectors, where the position is the “vertex id” and the content a list of other vertices reachable from here. So, for example, the graph <code class="docutils literal notranslate"><span class="pre">g</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">0</span><span class="w"></span>
<span class="nv">g</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="vg">⎕</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="o">,</span><span class="m">2</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="o">,</span><span class="no">⍬</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌───┬─┬───┬───┬┐
│1 2│2│1 3│0 4││
└───┴─┴───┴───┴┘
</span></div></div>
</div>
<p>could be visualized like so:</p>
<p><img alt="graph1" src="_images/graph1.png" /></p>
<p>We can easily create a separate vector that holds each vertex’s contents if we wanted to, say</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">vertices</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">&#39;adam&#39;</span><span class="w"> </span><span class="s1">&#39;bob&#39;</span><span class="w"> </span><span class="s1">&#39;charlotte&#39;</span><span class="w"> </span><span class="s1">&#39;damian&#39;</span><span class="w"> </span><span class="s1">&#39;erica&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Let’s load up a few of the graph functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;span&#39;</span><span class="w"> </span><span class="s1">&#39;stpath&#39;</span><span class="w"> </span><span class="s1">&#39;scc&#39;</span><span class="nf">⎕CY</span><span class="w"> </span><span class="s1">&#39;dfns&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>…and a little helper function to show graph structure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">show</span><span class="kd">←</span><span class="kt">{</span><span class="o">↑⍕</span><span class="na">¨</span><span class="p">(</span><span class="o">⍳⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="o">,</span><span class="na">¨</span><span class="s1">&#39;→&#39;</span><span class="o">,</span><span class="na">¨</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">show</span><span class="w"> </span><span class="nv">g</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 → 1 2
1 → 2  
2 → 1 3
3 → 0 4
4 →    
</span></div></div>
</div>
<p>The function <a class="reference external" href="http://dfns.dyalog.com/n_span.htm">span</a> finds the <a class="reference external" href="https://en.wikipedia.org/wiki/Spanning_tree">spanning tree</a> of a graph, which is basically removing any cycles whilst not making any previously reachable vertices unreachable. So let’s find the (actually, one of potentially several) spanning tree for our graph <code class="docutils literal notranslate"><span class="pre">g</span></code>, rooted at vertex 0, using the function called <code class="docutils literal notranslate"><span class="pre">span</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">st</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">g</span><span class="w"> </span><span class="nv">span</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Now that we have a spanning tree, we can find shortest paths in the graph. For example, what’s the shortest path from <code class="docutils literal notranslate"><span class="pre">adam</span></code> (vertex 0) to <code class="docutils literal notranslate"><span class="pre">erica</span></code> (vertex 4)? For this we apply the function <a class="reference external" href="http://dfns.dyalog.com/n_stpath.htm">stpath</a>, <em>spanning tree path</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">vertices</span><span class="sr">[</span><span class="nv">st</span><span class="w"> </span><span class="nv">stpath</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌────┬─────────┬──────┬─────┐
│adam│charlotte│damian│erica│
└────┴─────────┴──────┴─────┘
</span></div></div>
</div>
<p>By pre-calculating the spanning tree, we can do quick path finding to any other node in the graph. Note though that this approach will only find one shortest path, even if several of equal length might exist.</p>
<p>The implementations for <code class="docutils literal notranslate"><span class="pre">span</span></code> and <code class="docutils literal notranslate"><span class="pre">stpath</span></code> are worth studying. Note, however, that for many path-finding applications in graphs, as the graph gets bigger there are other algorithms worth considering, like <a class="reference external" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra’s shortest path</a>, or its heuristic cousin, <a class="reference external" href="https://en.wikipedia.org/wiki/A*_search_algorithm">A*</a>, that would cut the search space.</p>
<section id="strongly-connected-components">
<h3>Strongly Connected Components<a class="headerlink" href="#strongly-connected-components" title="Permalink to this headline">#</a></h3>
<p>The function <a class="reference external" href="http://dfns.dyalog.com/n_scc.htm">scc</a> implements <a class="reference external" href="https://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm">Tarjan’s algorithm</a> for finding the strongly connected components of a graph. The strongly connected components are groups of interconnected vertices, so for example a graph defined by the following adjacency index vector</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕IO</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="vg">⎕</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">graph</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="o">,</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">8</span><span class="p">)</span><span class="w"> </span><span class="no">⍬</span><span class="w"> </span><span class="p">(</span><span class="o">,</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">,</span><span class="m">9</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">,</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">,</span><span class="m">9</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">,</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌─┬───┬┬──┬─┬──┬─┬─┬───┬───┐
│2│1 8││10│9│10│9│2│5 7│4 6│
└─┴───┴┴──┴─┴──┴─┴─┴───┴───┘
</span></div></div>
</div>
<p>has the following strongly connected components (graph has vertices labeled ⍳10):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1 2  8
3
4 6 10
5 7  9
</pre></div>
</div>
<p>Note how vertex 3 is not connected to any other vertices and so forms its own connected component. We can use <code class="docutils literal notranslate"><span class="pre">scc</span></code> directly on the graph adjacency index vector to label each vertex with a connected component index:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="o">↑</span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">scc</span><span class="w"> </span><span class="nv">graph</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">┌→───────────────────┐
↓1 2 3 4 5 6 7 8 9 10│
│1 1 2 3 4 3 4 1 4  3│
└~───────────────────┘
</span></div></div>
</div>
<p>In the dfns ws there are also graph algorithms operating on <a class="reference external" href="http://dfns.dyalog.com/n_wGraphs.htm">weighted graphs</a> – where each edge has a cost that can differ from 1.</p>
<p>If you’re interested in using APL for graphs, there is a complete example provided for route planning in various <a class="reference external" href="http://dfns.dyalog.com/tube_n_index.htm">tube systems of world cities</a> for you to study.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dyalog-kernel"
        },
        kernelOptions: {
            kernelName: "dyalog-kernel",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dyalog-kernel'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="http.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">HttpCommand</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="testing.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Testing</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Stefan Kruger, Computational Array and Magic<br/>
  
    <div class="extra_footer">
      <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
</a></p>
<p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>